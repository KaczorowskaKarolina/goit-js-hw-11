{"mappings":"AAAO,MAGMA,EAAyB,CACpCC,IAHqB,qCAIrBC,SAAU,KACVC,WAAY,QACZC,YAAa,aACbC,WAAY,QCNCC,eAAAC,GAA2BC,EAAEA,EAAI,GAAEC,KAAEA,EAAO,MACvD,IACI,MAAMC,EAAc,IAAIC,gBAAiB,IAClCX,E,KACHS,E,EACAD,IAGEI,QAAiBC,MAAM,2BAAeH,KAC5C,IAAKE,EAASE,GACV,OAAwB,MAApBF,EAASG,OACF,GAEJ,CAAEC,MAAOJ,EAASG,QAG7B,MAAOE,KAAMC,SAAgBN,EAASO,OACtC,OAAOD,C,CAEX,MAAOE,GACH,MAAO,CAACJ,MAAOI,EAAEC,W,ECpBzB,MAAMC,EAAmBC,IACrB,MAAMC,EAAMC,SAASC,cAAc,OAGnC,OAFAF,EAAIG,UAAUC,IAAI,SAClBJ,EAAIK,IAAMN,EAAMO,aACTN,CAAG,EAaPlB,eAAeyB,GAAWvB,EAACA,EAACC,KAAEA,IACjC,MAAMS,QAAeX,EAAa,C,EAACC,E,KAAGC,IAClCS,EAAOF,MACPgB,MAAMd,EAAOF,OAbrB,UAAqBE,OAAEA,EAAMT,KAAEA,IAC3B,MAAMwB,EAAiBR,SAASS,cAAc,WACjC,MAATzB,IACAwB,EAAeE,UAAY,IAG/B,MAAMC,EAAWlB,EAAOmB,IAAIf,GAC5BW,EAAeK,UAAUF,E,CASzBG,CAAY,C,OAACrB,E,KAAQT,G,CCdlBH,eAAekC,IAClB,MAAMC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBlB,SAASmB,gBAC3D,GAAIH,EAAYE,GAAgBD,EAAc,CAC1C,MAAMG,EAAapB,SAASS,cAAc,qBACpCzB,EAAOqC,SAASD,EAAWpC,KAAKsC,OAC1CF,EAAWpC,KAAKsC,MAAQtC,EAAO,QAC7BsB,EAAW,CAAEvB,EAAGqC,EAAWrC,EAAEuC,MAAOtC,KAAMoC,EAAWpC,KAAKsC,O,ECfhE,MAAMC,EAAavB,SAASS,cAAc,qBAE1Cc,EAAWC,iBAAiB,UDFrB3C,eAA+Bc,GAClCA,EAAE8B,iBAEF9B,EAAE+B,OAAO1C,KAAKsC,MAAQ,IACtB,MAAMvC,EAAIY,EAAE+B,OAAO3C,EAAEuC,YAEfhB,EAAY,C,EAAEvB,EAAGC,KAAM,K,ICHjCuC,EAAWI,cAAc,IAAIC,MAAM,WAEnCb,IACAc,OAAOL,iBAAiB,SAAUT","sources":["src/js/config.js","src/js/pixabay.js","src/js/load.js","src/js/handlers.js","src/js/index.js"],"sourcesContent":["export const API_PATH = 'https://pixabay.com/api';\nexport const API_KEY = '39260371-83ef64e0aa197167fe58dcdf0';\n\nexport const DEFAULT_PIXABAY_PARAMS = {\n  key: API_KEY,\n  per_page: '40',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};","import { API_PATH, DEFAULT_PIXABAY_PARAMS } from './config.js';\n\nexport default async function pingPixabay({ q = '', page = '1' }) {\n    try {\n        const querystring = new URLSearchParams ({\n            ...DEFAULT_PIXABAY_PARAMS,\n            page,\n            q,\n        });\n\n        const response = await fetch(`${API_PATH}?${querystring}`);\n        if (!response.ok) {\n            if (response.status === 400) {\n                return [];\n            }\n            return { error: response.status};\n        }\n\n        const {hits: photos} = await response.json();\n        return photos;\n    }\n    catch (e) {\n        return {error: e.toString()};\n    }\n}","import pingPixabay from './pixabay.js';\n\nconst getPhotoElement = (photo) => {\n    const img = document.createElement('img');\n    img.classList.add('photo');\n    img.src = photo.webformatURL;\n    return img;\n};\n\nfunction drawPhotos ({ photos, page}) {\n    const photoContainer = document.querySelector('#photos');\n    if (page === '1') {\n        photoContainer.innerHTML = '';\n    }\n\n    const children = photos.map(getPhotoElement);\n    photoContainer.append(...children);\n}\n\nexport async function loadPhotos({q, page}) {\n    const photos = await pingPixabay ({q, page});\n    if (photos.error) {\n        alert(photos.error);\n        return;\n    }\n    drawPhotos ({photos, page});\n    return;\n}","import { loadPhotos } from './load.js';\n\nexport async function searchForPhotos(e) {\n    e.preventDefault();\n\n    e.target.page.value = '1';\n    const q = e.target.q.value;\n\n    await loadPhotos ({ q, page: '1' });\n}\n\nexport async function scrollHandler() {\n    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n    if (scrollTop + clientHeight >= scrollHeight) {\n        const searchForm = document.querySelector('#searchPhotosForm');\n        const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\nawait loadPhotos({ q: searchForm.q.value, page: searchForm.page.value});\n  }\n}","import { searchForPhotos, scrollHandler } from './handlers.js';\n\nconst searchForm = document.querySelector('#searchPhotosForm');\n\nsearchForm.addEventListener('submit', searchForPhotos);\nsearchForm.dispatchEvent(new Event('submit'));\n\nscrollHandler();\nwindow.addEventListener('scroll', scrollHandler);"],"names":["$ef19e442e0cefa4b$export$e5af7a009e6ed2bd","key","per_page","image_type","orientation","safesearch","async","$9b3bf443d3cc2ade$export$2e2bcd8739ae039","q","page","querystring","URLSearchParams","response","fetch","ok","status","error","hits","photos","json","e","toString","$21cfdd85d7234348$var$getPhotoElement","photo","img","document","createElement","classList","add","src","webformatURL","$21cfdd85d7234348$export$345071c5d7c214f4","alert","photoContainer","querySelector","innerHTML","children","map","append","$21cfdd85d7234348$var$drawPhotos","$d8a793c09f0bd7ed$export$f43482f3c394e174","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt","value","$85a5f86b715fe7db$var$searchForm","addEventListener","preventDefault","target","dispatchEvent","Event","window"],"version":3,"file":"index.96f42a20.js.map"}