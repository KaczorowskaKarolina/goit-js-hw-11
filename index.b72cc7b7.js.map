{"mappings":"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","sources":["src/js/config.js","src/js/pixabay.js","src/js/load.js","src/js/handlers.js","src/js/index.js"],"sourcesContent":["export const API_PATH = 'https://pixabay.com/api'; \nexport const API_KEY = '39260371-83ef64e0aa197167fe58dcdf0';\n\nexport const DEFAULT_PIXABAY_PARAMS = { \n  key: API_KEY, \n  perpage: '40', \n  image_type: 'photo', \n  orientation: 'horizontal', \n  safesearch: 'true', \n};","import { API_PATH, DEFAULT_PIXABAY_PARAMS } from './config.js';\n\nexport default async function pingPixabay({ q = '', page = '1' }) {\n    try {\n        const querystring = new URLSearchParams ({\n            ...DEFAULT_PIXABAY_PARAMS,\n            page,\n            q,\n        });\n\n    const response = await fetch(`${API_PATH}?${querystring}`);\n    if (!response.ok) {\n        if (response.status === 400) {\n            return [];\n        }\n        return { error: response.status};\n    }\n\n    const {hits: photos} = await response.json();\n    return photos;\n}\ncatch (e) {\n    return {error: e.toString()};\n}\n}","import pingPixabay from './pixabay.js';\n\nconst getPhotoElement = (photo) => {\n  const img = document.createElement('img');\n  img.classList.add('photo');\n  img.src = photo.webformatURL;\n  return img;\n};\n\nfunction drawPhotos({ photos, page }) {\n  const photoContainer = document.querySelector('#photos');\n  if (page === '1') {\n    photoContainer.innerHTML = '';\n  }\n\n  const children = photos.map(getPhotoElement);\n  photoContainer.append(...children);\n}\n\nexport async function loadPhotos({ q, page }) {\n  const photos = await pingPixabay({ q, page });\n  if (photos.error) {\n    alert(photos.error);\n    return;\n  }\n  drawPhotos({ photos, page });\n  return;\n}","import { loadPhotos } from './load.js';\n\nexport async function searchForPhotos(e) {\n  e.preventDefault();\n\n  e.target.page.value = '1';\n  const q = e.target.q.value;\n\n  await loadPhotos({ q, page: '1' });\n}\n\nexport async function scrollHandler() {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  if (scrollTop + clientHeight >= scrollHeight) {\n    const searchForm = document.querySelector('#searchPhotosForm');\n    const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\n    await loadPhotos({ q: searchForm.q.value, page: searchForm.page.value });\n  }\n}\n\nexport function enlargePhoto(e) {\n    // Check if the clicked element is an image\n    if (e.target.classList.contains('photo')) {\n      const enlargedPhotoContainer = document.getElementById('modal-image'); // Update the container ID here\n      enlargedPhotoContainer.innerHTML = '';\n  \n      const enlargedPhoto = document.createElement('img');\n      enlargedPhoto.src = e.target.src;\n      enlargedPhoto.classList.add('enlargedPhoto');\n  \n      enlargedPhotoContainer.appendChild(enlargedPhoto);\n      enlargedPhotoContainer.style.display = 'flex';\n    }\n  }","import {\n    searchForPhotos,\n    scrollHandler,\n    enlargePhoto\n  } from './handlers.js';\n  \n  const searchForm = document.querySelector('#searchPhotosForm');\n  \n  searchForm.addEventListener('submit', searchForPhotos);\n  // Uncomment the line below if you want to load photos on page load\n  // searchForm.dispatchEvent(new Event('submit'));\n  \n  scrollHandler();\n  window.addEventListener('scroll', scrollHandler);\n  \n  const photosContainer = document.querySelector('#photos');\n  photosContainer.addEventListener('click', enlargePhoto);\n  \n  const modal = document.getElementById('modal');\n  const modalImage = document.getElementById('modal-image');\n  const closeModal = document.getElementById('close-modal');\n  \n  const photos = document.querySelectorAll('.photo'); // Move the declaration and initialization here\n  \n  photos.forEach(photo => {\n    photo.addEventListener('click', () => {\n      modal.style.display = 'block';\n      modalImage.src = photo.src;\n    });\n  });\n  \n  closeModal.addEventListener('click', () => {\n    modal.style.display = 'none';\n  });\n  \n  // Function to handle left and right infinite scroll\n  function handleInfiniteScroll(e) {\n    const { scrollLeft, scrollWidth, clientWidth } = e.target;\n    if (scrollLeft + clientWidth >= scrollWidth - 10) {\n      const searchForm = document.querySelector('#searchPhotosForm');\n      const page = parseInt(searchForm.page.value);\n      searchForm.page.value = page + 1;\n      searchForPhotos(e); // Trigger a new photo search on scroll\n    }\n  }\n  \n  // Add event listeners for infinite scroll\n  photoContainer.addEventListener('scroll', handleInfiniteScroll);\n  photoContainer.addEventListener('wheel', handleInfiniteScroll);"],"names":["$ef19e442e0cefa4b$export$e5af7a009e6ed2bd","key","perpage","image_type","orientation","safesearch","async","$9b3bf443d3cc2ade$export$2e2bcd8739ae039","q","page","querystring","URLSearchParams","response","fetch","ok","status","error","hits","photos","json","e","toString","$21cfdd85d7234348$var$getPhotoElement","photo","img","document","createElement","classList","add","src","webformatURL","$21cfdd85d7234348$export$345071c5d7c214f4","alert","photoContainer","querySelector","innerHTML","children","map","append","$21cfdd85d7234348$var$drawPhotos","$d8a793c09f0bd7ed$export$ecb6a838450dd6e2","preventDefault","target","value","$d8a793c09f0bd7ed$export$f43482f3c394e174","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt","addEventListener","window","contains","enlargedPhotoContainer","getElementById","enlargedPhoto","appendChild","style","display","$85a5f86b715fe7db$var$modal","$85a5f86b715fe7db$var$modalImage","$85a5f86b715fe7db$var$closeModal","$85a5f86b715fe7db$var$handleInfiniteScroll","scrollLeft","scrollWidth","clientWidth","searchForm1","querySelectorAll","forEach"],"version":3,"file":"index.b72cc7b7.js.map"}